<%- include('../header') %>
    <%- include('../left-sidebar') %>
        <form method="post" autocomplete="off" id="admin_purge_settings">
            <div class="page">
                <div class="container-fluid">
                    <div class="d-flex justify-content-between">
                        <h1 class="commanHeading">Purge Cron Logs :<b>
                            </b></h1>
                    </div>
                    <hr>
                    <div class="card">
                        <div class="body table-responsive">
                            <table id="criteria_tbl" class="table table-striped table-bordered" style="width:100%">
                                <thead>
                                    <tr>
                                        <th style="font-size: 20px;">Purge Selection Criteria : </th>
                                        <th><select class="form-select form-control" id="purge_criteria_ddl"
                                                aria-label="Default select example" onchange="selectionChanged(this)">
                                                <option selected value="-1">-- Please Select --</option>
                                                <option value="cronName">Cron Name</option>
                                                <option value="timeStamp">Date</option>
                                            </select></th>
                                    </tr>
                                </thead>
                            </table>
                            <hr>
                            <h3 name="paramLbl" class="d-none"> Criteria Parameter Selection: </h3>
                            <br>
                            <table name="criteria_cron_name" class="table table-striped table-bordered d-none"
                                style="width:100%">
                                <thead>
                                    <tr>
                                        <th style="font-size: 20px;">Select the cron :
                                        </th>
                                        <th><select class="form-select form-control" id="purge_cron_id"
                                                aria-label="Default select example">
                                                <% itemModel.items.forEach(function (list,idx) { %>
                                                    <option <%=idx==0 ? "selected" : "" %> value= <%= list.CronId %>>
                                                            <%= list.CronName %>
                                                    </option>
                                                    <%})%>
                                            </select></th>
                                    </tr>
                                </thead>
                            </table>
                            <table name="criteria_date_time" class="table table-striped table-bordered d-none"
                                style="width:100%">
                                <thead>
                                    <tr>
                                        <th style="font-size: 20px;">Select the date</th>
                                        <th><input type="date" id="startDate" name="startDate"></th>
                                    </tr>
                                </thead>
                            </table>
                            <a onClick="cancelPurge()" class="btn btn-warning mx-1" name="btn_cancel_on_all"
                                style="float: right;color: black;"><i class="fa-solid fa-ban"></i>
                                &nbsp;Cancel</a>
                            <a onClick="submitPurge()" class="btn btn-success mx-1" name="btn_submit_purge_All"
                                style="float: right;color: black;"><i class="fa-solid fa-trash"></i>
                                &nbsp;Purge</a>
                        </div>
                    </div>
                </div>
                <!-- <div class="container-fluid" id="Cron-422CronDiv">
                    <%- include('_partials/cacheClear.ejs') %>
                </div> -->
                <div class="container-fluid" id="RunCronDiv">
                    <%- include('_partials/runCron.ejs') %>
                </div>
                <div class="container-fluid" id="RunCronDiv">
                    <%- include('_partials/proxyProviderFailure.ejs') %>
                </div>
            </div>
        </form>
        <%- include("../footer"); %>
            <style>
                /* Basic Rules */
                .switch input {
                    display: none;
                }

                .switch {
                    display: inline-block;
                    width: 52px;
                    height: 22px;
                    margin: 8px;
                    transform: translateY(50%);
                    position: relative;
                }

                /* Style Wired */
                .slider {
                    position: absolute;
                    top: 0;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    border-radius: 30px;
                    box-shadow: 0 0 0 2px #777, 0 0 4px #777;
                    cursor: pointer;
                    border: 4px solid transparent;
                    overflow: hidden;
                    transition: 0.4s;
                }

                .slider:before {
                    position: absolute;
                    content: "";
                    width: 100%;
                    height: 100%;
                    background: #777;
                    border-radius: 30px;
                    transform: translateX(-30px);
                    transition: 0.4s;
                }

                input:checked+.slider:before {
                    transform: translateX(30px);
                    background: limeGreen;
                }

                input:checked+.slider {
                    box-shadow: 0 0 0 2px limeGreen, 0 0 2px limeGreen;
                }

                /* Style Flat */
                .switch.flat .slider {
                    box-shadow: none;
                }

                .switch.flat .slider:before {
                    background: #fff;
                }

                .switch.flat input:checked+.slider:before {
                    background: white;
                }

                .switch.flat input:checked+.slider {
                    background: limeGreen;
                }
            </style>
            <script src="/javascripts/dashboard.js"></script>