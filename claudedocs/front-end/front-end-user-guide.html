<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Front-End User Guide - V2 Algorithm UI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            border-bottom: 4px solid #5568d3;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .meta-info {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 8px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .meta-info div {
            display: flex;
            flex-direction: column;
        }

        .meta-info strong {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-bottom: 0.25rem;
        }

        .meta-info span {
            font-size: 1.1rem;
        }

        nav {
            background: #f8f9fa;
            padding: 1.5rem 2rem;
            border-bottom: 2px solid #e9ecef;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav h2 {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        nav a {
            color: #667eea;
            text-decoration: none;
            padding: 0.5rem 1rem;
            background: white;
            border-radius: 6px;
            border: 1px solid #e9ecef;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        nav a:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .content {
            padding: 2rem;
        }

        section {
            margin-bottom: 3rem;
            scroll-margin-top: 100px;
        }

        h2 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #667eea;
        }

        h3 {
            color: #764ba2;
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
        }

        h4 {
            color: #495057;
            font-size: 1.2rem;
            margin: 1.5rem 0 0.75rem 0;
        }

        p {
            margin-bottom: 1rem;
            color: #495057;
        }

        .card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 4px solid #667eea;
        }

        .card h4 {
            margin-top: 0;
            color: #667eea;
        }

        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: #495057;
        }

        code {
            background: #f1f3f5;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin-bottom: 1.5rem;
            border-left: 4px solid #667eea;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        th {
            background: #667eea;
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .badge-required { background: #dc3545; color: white; }
        .badge-optional { background: #6c757d; color: white; }
        .badge-strategy { background: #28a745; color: white; }
        .badge-ui { background: #007bff; color: white; }

        .highlight-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .warning-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .step {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
        }

        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        footer {
            background: #2d3748;
            color: white;
            padding: 2rem;
            text-align: center;
            margin-top: 3rem;
        }

        footer p {
            color: #cbd5e0;
        }

        .diagram {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .flow-box {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 0.5rem;
            font-weight: 600;
        }

        .flow-arrow {
            display: inline-block;
            font-size: 1.5rem;
            color: #667eea;
            margin: 0 0.5rem;
        }

        .faq-item {
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #e9ecef;
        }

        .faq-question {
            font-size: 1.2rem;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .faq-answer {
            color: #495057;
        }

        .screenshot-placeholder {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 3rem;
            text-align: center;
            color: #6c757d;
            margin: 1.5rem 0;
        }

        .decision-tree {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border: 2px solid #e9ecef;
        }

        .tree-node {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            margin: 0.5rem 0;
            border-left: 4px solid #667eea;
        }

        .tree-branch {
            margin-left: 2rem;
            padding-left: 1rem;
            border-left: 2px dashed #dee2e6;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Front-End User Guide</h1>
            <p>Complete guide for using the V2 Algorithm React UI - Modern product management and repricing configuration</p>
            <div class="meta-info">
                <div>
                    <strong>Technology Stack</strong>
                    <span>React 19.1 + Vite</span>
                </div>
                <div>
                    <strong>Routing</strong>
                    <span>TanStack Router</span>
                </div>
                <div>
                    <strong>UI Framework</strong>
                    <span>Radix UI + Tailwind</span>
                </div>
                <div>
                    <strong>Access URL</strong>
                    <span>/vite</span>
                </div>
            </div>
        </header>

        <nav>
            <h2>Quick Navigation</h2>
            <ul>
                <li><a href="#getting-started">Getting Started</a></li>
                <li><a href="#core-concepts">Core Concepts</a></li>
                <li><a href="#tutorials">Step-by-Step Tutorials</a></li>
                <li><a href="#badge-strategies">Badge Strategy Guide</a></li>
                <li><a href="#ui-components">UI Components</a></li>
                <li><a href="#form-fields">Form Field Reference</a></li>
                <li><a href="#workflows">Common Workflows</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
                <li><a href="#best-practices">Best Practices</a></li>
                <li><a href="#faq">FAQ</a></li>
            </ul>
        </nav>

        <div class="content">
            <!-- GETTING STARTED -->
            <section id="getting-started">
                <h2>Getting Started</h2>

                <h3>What is the Front-End Application?</h3>
                <p>The Front-End application is a modern React-based user interface designed specifically for managing V2 Algorithm settings and monitoring repricing operations across 6 dental supply vendors. It provides a streamlined, accessible way to configure complex pricing strategies without directly manipulating database records.</p>

                <div class="info-box">
                    <strong>Key Features:</strong>
                    <ul>
                        <li>Visual product management with real-time data tables</li>
                        <li>V2 Algorithm configuration with 27 customizable settings per product-vendor</li>
                        <li>Badge competition strategy selection (4 distinct modes)</li>
                        <li>Execution history and error monitoring</li>
                        <li>Bulk operations for efficiency</li>
                        <li>Mobile-responsive design with accessibility features</li>
                    </ul>
                </div>

                <h3>Accessing the UI</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Navigate to the Application</strong>
                    <p>The React UI is embedded in the existing repricer application at the <code>/vite</code> route:</p>
                    <pre><code>http://your-domain.com/vite</code></pre>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Login</strong>
                    <p>Use your existing repricer application credentials. The UI uses the same authentication system as the main application.</p>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Main Navigation</strong>
                    <p>The UI provides two main pages accessible via the navigation menu:</p>
                    <ul>
                        <li><strong>Products</strong> - Main product management dashboard (default route: <code>/vite/</code>)</li>
                        <li><strong>Errors</strong> - Algorithm execution error monitoring (route: <code>/vite/errors</code>)</li>
                    </ul>
                </div>

                <div class="screenshot-placeholder">
                    [Screenshot: Main Navigation Bar showing Products and Errors tabs]
                </div>

                <h3>UI Overview</h3>

                <div class="diagram">
                    <div class="flow-box">Navigation Bar</div>
                    <div class="flow-arrow">‚Üì</div>
                    <br/>
                    <div class="flow-box">Products Page<br/>(DataTable)</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-box">Product Detail<br/>(Settings + History)</div>
                    <br/><br/>
                    <div class="flow-arrow">‚Üì</div>
                    <br/>
                    <div class="flow-box">V2 Algorithm<br/>Settings Form</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-box">Execution<br/>Results</div>
                </div>
            </section>

            <!-- CORE CONCEPTS -->
            <section id="core-concepts">
                <h2>Core Concepts</h2>

                <h3>What is the V2 Algorithm?</h3>
                <p>The V2 Algorithm is the advanced repricing engine that determines competitive pricing strategies based on marketplace dynamics, seller badges, inventory levels, and custom business rules. Unlike the legacy V1 algorithm, V2 provides:</p>

                <div class="grid-2">
                    <div class="card">
                        <h4>Enhanced Competition Analysis</h4>
                        <p>Analyzes competitors based on badge levels, handling time groups, and inventory thresholds to make intelligent pricing decisions.</p>
                    </div>
                    <div class="card">
                        <h4>Buy-Box Optimization</h4>
                        <p>Strategies specifically designed to win the Net32 buy-box position while maintaining profitability.</p>
                    </div>
                    <div class="card">
                        <h4>Price Break Management</h4>
                        <p>Sophisticated handling of quantity-based pricing tiers with conditional suppression logic.</p>
                    </div>
                    <div class="card">
                        <h4>Customizable Margins</h4>
                        <p>Granular control over pricing boundaries with floor prices, max prices, and percentage-based adjustments.</p>
                    </div>
                </div>

                <h3>Product-Vendor Relationship</h3>
                <p>Each product can have different algorithm settings for each vendor it's listed under. The V2 settings are stored per <strong>mp_id</strong> (marketplace product ID) and <strong>vendor_id</strong> combination.</p>

                <div class="info-box">
                    <strong>Example:</strong> Product with mp_id 12345 might have different pricing strategies for:
                    <ul>
                        <li>Tradent (vendor_id: 17357) - Aggressive buy-box strategy</li>
                        <li>Frontier (vendor_id: 20722) - Conservative margin protection</li>
                        <li>MVP (vendor_id: 20755) - Balanced competition approach</li>
                    </ul>
                </div>

                <h3>Algorithm Execution Modes</h3>
                <p>Products can run in one of four execution modes, allowing gradual migration from V1 to V2:</p>

                <table>
                    <thead>
                        <tr>
                            <th>Mode</th>
                            <th>Description</th>
                            <th>Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>V1_ONLY</code></td>
                            <td>Runs legacy algorithm only</td>
                            <td>Products not yet migrated to V2</td>
                        </tr>
                        <tr>
                            <td><code>V2_ONLY</code></td>
                            <td>Runs V2 algorithm exclusively</td>
                            <td>Fully migrated products with tested V2 settings</td>
                        </tr>
                        <tr>
                            <td><code>V2_EXECUTE_V1_DRY</code></td>
                            <td>Executes V2, simulates V1 for comparison</td>
                            <td>Testing V2 settings while logging V1 results</td>
                        </tr>
                        <tr>
                            <td><code>V1_EXECUTE_V2_DRY</code></td>
                            <td>Executes V1, simulates V2 for testing</td>
                            <td>Preparing for V2 migration, validating settings</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Key Terminology</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Term</th>
                            <th>Definition</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>mp_id</strong></td>
                            <td>Marketplace Product ID - unique identifier for each product on Net32</td>
                        </tr>
                        <tr>
                            <td><strong>vendor_id</strong></td>
                            <td>Numeric ID representing one of the 6 dental supply vendors</td>
                        </tr>
                        <tr>
                            <td><strong>channel_id</strong></td>
                            <td>Net32's internal identifier linking product to vendor channel</td>
                        </tr>
                        <tr>
                            <td><strong>Badge Level</strong></td>
                            <td>Seller performance indicator (0-3) affecting competition strategy</td>
                        </tr>
                        <tr>
                            <td><strong>Price Break</strong></td>
                            <td>Quantity-based discount tier (Q1, Q2, Q3, Q4)</td>
                        </tr>
                        <tr>
                            <td><strong>Buy-Box</strong></td>
                            <td>Featured seller position on Net32 product page</td>
                        </tr>
                        <tr>
                            <td><strong>Floor Price</strong></td>
                            <td>Minimum acceptable price - algorithm will not go below this</td>
                        </tr>
                        <tr>
                            <td><strong>Max Price</strong></td>
                            <td>Maximum price cap - algorithm will not exceed this</td>
                        </tr>
                        <tr>
                            <td><strong>Handling Time</strong></td>
                            <td>Estimated shipping processing time (Fast/Stocked/Long)</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- TUTORIALS -->
            <section id="tutorials">
                <h2>Step-by-Step Tutorials</h2>

                <h3>Tutorial 1: Viewing All Products</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Access Products Page</strong>
                    <p>Navigate to <code>/vite/</code> or click "Products" in the navigation menu.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Understanding the Data Table</strong>
                    <p>The main table displays all products with their V2 algorithm settings and execution status:</p>
                    <ul>
                        <li><strong>Channel Name</strong> - Vendor (Tradent, Frontier, MVP, etc.)</li>
                        <li><strong>Active - Repricer</strong> - Whether repricing is enabled for this product-vendor</li>
                        <li><strong>Data - Scrape</strong> - Whether product is actively being scraped for competitor data</li>
                        <li><strong>MP ID</strong> - Product identifier (clickable to view details)</li>
                        <li><strong>Last Run</strong> - Timestamp of most recent algorithm execution</li>
                        <li><strong>Comment</strong> - Algorithm decision explanation</li>
                        <li><strong>Strategy</strong> - Current price strategy (UNIT/TOTAL/BUY_BOX)</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Using Table Controls</strong>
                    <ul>
                        <li><strong>Sorting</strong> - Click column headers with arrow icons to sort ascending/descending</li>
                        <li><strong>Filtering</strong> - Use the search box above the table to filter by MP ID or channel</li>
                        <li><strong>Column Visibility</strong> - Click "View" button to show/hide specific columns</li>
                        <li><strong>Pagination</strong> - Use bottom controls to navigate through pages (default: 10 rows per page)</li>
                    </ul>
                </div>

                <div class="screenshot-placeholder">
                    [Screenshot: Products page with DataTable showing sorting and filtering controls]
                </div>

                <h3>Tutorial 2: Configuring V2 Algorithm Settings</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Navigate to Product Detail</strong>
                    <p>Click the <strong>Eye icon</strong> in the Actions column for any product, or click the MP ID directly. This opens the product detail page in a new tab.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Select Vendor Tab</strong>
                    <p>The product detail page shows tabs for each vendor. Select the vendor you want to configure (e.g., "TRADENT" or "FRONTIER").</p>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Review Current Settings</strong>
                    <p>The V2AlgoSettingsForm displays all 27 configuration fields with their current values. Settings are organized into logical groups:</p>
                    <ul>
                        <li><strong>Basic Settings</strong> - Enable/disable, price direction, badge indicator</li>
                        <li><strong>Competition Settings</strong> - Badge strategies, vendor exclusions, handling time filters</li>
                        <li><strong>Price Boundaries</strong> - Floor price, max price, percentages</li>
                        <li><strong>Advanced Rules</strong> - Price break handling, inventory thresholds, position keeping</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">4</span>
                    <strong>Modify Settings</strong>
                    <p>Update any fields as needed. All fields include validation to prevent invalid values:</p>
                    <ul>
                        <li>Numeric fields only accept numbers</li>
                        <li>Percentages are validated to be between -1 and 100</li>
                        <li>Dropdowns restrict to valid enum values</li>
                        <li>Required fields are marked and cannot be left empty</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">5</span>
                    <strong>Save Configuration</strong>
                    <p>Click the <strong>"Save Settings"</strong> button at the bottom of the form. A success toast notification confirms the save, and the form updates with any server-calculated values.</p>
                </div>

                <div class="warning-box">
                    <strong>Important:</strong> Changes take effect on the next cron execution. To immediately apply new settings, use the "Manual Reprice" button after saving.
                </div>

                <h3>Tutorial 3: Understanding Badge Competition Strategies</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Locate Badge Strategy Field</strong>
                    <p>In the V2AlgoSettingsForm, find the <code>badge_indicator</code> dropdown field.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Select Strategy</strong>
                    <p>Choose from four strategies based on your competitive approach (detailed explanation in Badge Strategy Guide section below):</p>
                    <ul>
                        <li><code>ALL</code> - Default, compete with all sellers</li>
                        <li><code>BADGE</code> - Advanced, restrict competition to badge holders only</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Configure Related Percentages</strong>
                    <p>Adjust badge-specific percentage fields:</p>
                    <ul>
                        <li><code>reprice_up_badge_percentage</code> - How much to increase price when competing with badge sellers</li>
                        <li><code>reprice_down_badge_percentage</code> - How much to decrease price when competing with badge sellers</li>
                    </ul>
                </div>

                <h3>Tutorial 4: Monitoring Errors and Execution</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Access Errors Page</strong>
                    <p>Click "Errors" in the navigation menu or navigate to <code>/vite/errors</code>.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Review Error List</strong>
                    <p>The errors table shows all unhandled algorithm execution failures:</p>
                    <ul>
                        <li><strong>MP ID</strong> - Affected product</li>
                        <li><strong>Cron Name</strong> - Which automated job encountered the error</li>
                        <li><strong>Created At</strong> - When the error occurred (with "time ago" display)</li>
                        <li><strong>Error Message</strong> - Truncated error description</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>View Error Details</strong>
                    <p>Click <strong>"View Error"</strong> button to open full error message in new tab. Click <strong>"View Data"</strong> to see the Net32 JSON that caused the error.</p>
                </div>

                <div class="step">
                    <span class="step-number">4</span>
                    <strong>Check Execution History</strong>
                    <p>On the product detail page, scroll to the execution history table to see:</p>
                    <ul>
                        <li>All algorithm runs (successful and failed)</li>
                        <li>Suggested prices vs actual prices applied</li>
                        <li>Chain-of-thought HTML (click to view reasoning)</li>
                        <li>Triggered by vendor information</li>
                    </ul>
                </div>

                <h3>Tutorial 5: Bulk Operations</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Remove All Products from 422 Queue</strong>
                    <p>On the Products page, click the <strong>"Remove All From 422"</strong> button to clear all 422 error cache entries at once. This is useful after fixing systemic issues.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Sync All Vendor Settings</strong>
                    <p>Click <strong>"Sync All Settings"</strong> to synchronize V2 algorithm settings across all vendors for all products. This ensures database consistency.</p>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Refresh Data (Ignore Cache)</strong>
                    <p>Use the <strong>"Refresh Data (Ignore Cache)"</strong> button to force-fetch latest data from the database, bypassing any cached results.</p>
                </div>
            </section>

            <!-- BADGE STRATEGY GUIDE -->
            <section id="badge-strategies">
                <h2>Badge Strategy Guide</h2>

                <h3>Understanding Seller Badges</h3>
                <p>On Net32 marketplace, sellers can have badge levels (0-3) indicating performance, trustworthiness, and fulfillment capabilities. The V2 algorithm allows you to define how to compete based on these badges.</p>

                <div class="info-box">
                    <strong>Badge Levels:</strong>
                    <ul>
                        <li><strong>Badge 0</strong> - No badge (standard seller)</li>
                        <li><strong>Badge 1</strong> - Basic performance badge</li>
                        <li><strong>Badge 2</strong> - Intermediate performance badge</li>
                        <li><strong>Badge 3</strong> - Premium performance badge</li>
                    </ul>
                </div>

                <h3>Strategy 1: ALL (Default)</h3>

                <div class="card">
                    <h4><span class="badge badge-strategy">ALL</span> Compete with All Sellers</h4>
                    <p><strong>Behavior:</strong> Algorithm considers ALL competitors regardless of badge level when determining pricing.</p>

                    <p><strong>Use Cases:</strong></p>
                    <ul>
                        <li>Highly competitive products where market share is priority</li>
                        <li>Commoditized items with low differentiation</li>
                        <li>Products where your vendor has strong fulfillment capabilities</li>
                    </ul>

                    <p><strong>Example Scenario:</strong></p>
                    <p>Your product costs $50. Competitors include:</p>
                    <ul>
                        <li>Badge 0 seller at $45</li>
                        <li>Badge 2 seller at $48</li>
                        <li>Badge 3 seller at $52</li>
                    </ul>
                    <p><strong>Result:</strong> With "ALL" strategy, algorithm prices against the $45 seller (lowest competitor).</p>
                </div>

                <h3>Strategy 2: BADGE</h3>

                <div class="card">
                    <h4><span class="badge badge-strategy">BADGE</span> Compete with Badge Holders Only</h4>
                    <p><strong>Behavior:</strong> Algorithm ignores badge 0 sellers and only competes with badge 1+ sellers.</p>

                    <p><strong>Use Cases:</strong></p>
                    <ul>
                        <li>Premium products where quality perception matters</li>
                        <li>High-margin items where competing with low-quality sellers isn't worth it</li>
                        <li>Products where your vendor has premium badges and shouldn't compete down to badge 0 levels</li>
                    </ul>

                    <p><strong>Example Scenario:</strong></p>
                    <p>Your product costs $50. Competitors include:</p>
                    <ul>
                        <li>Badge 0 seller at $40 (IGNORED)</li>
                        <li>Badge 1 seller at $48</li>
                        <li>Badge 2 seller at $51</li>
                    </ul>
                    <p><strong>Result:</strong> With "BADGE" strategy, algorithm prices against the $48 badge 1 seller, ignoring the cheaper badge 0 option.</p>
                </div>

                <h3>Badge Strategy Decision Tree</h3>

                <div class="decision-tree">
                    <div class="tree-node">
                        <strong>Start: Choose Badge Strategy</strong>
                    </div>
                    <div class="tree-branch">
                        <div class="tree-node">
                            <strong>Question 1:</strong> Is this a high-margin premium product?
                        </div>
                        <div class="tree-branch">
                            <div class="tree-node">
                                <strong>Yes ‚Üí</strong> Consider <code>BADGE</code> strategy to protect margins
                            </div>
                            <div class="tree-node">
                                <strong>No ‚Üí</strong> Continue to Question 2
                            </div>
                        </div>
                    </div>
                    <div class="tree-branch">
                        <div class="tree-node">
                            <strong>Question 2:</strong> Is winning buy-box position critical?
                        </div>
                        <div class="tree-branch">
                            <div class="tree-node">
                                <strong>Yes ‚Üí</strong> Use <code>ALL</code> strategy for maximum competitiveness
                            </div>
                            <div class="tree-node">
                                <strong>No ‚Üí</strong> Continue to Question 3
                            </div>
                        </div>
                    </div>
                    <div class="tree-branch">
                        <div class="tree-node">
                            <strong>Question 3:</strong> Does your vendor have badge 2+ status?
                        </div>
                        <div class="tree-branch">
                            <div class="tree-node">
                                <strong>Yes ‚Üí</strong> Consider <code>BADGE</code> to maintain premium positioning
                            </div>
                            <div class="tree-node">
                                <strong>No ‚Üí</strong> Use <code>ALL</code> for broader competition
                            </div>
                        </div>
                    </div>
                </div>

                <h3>Badge Percentage Settings</h3>

                <p>When using badge strategies, adjust these related percentage fields:</p>

                <table>
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Purpose</th>
                            <th>Recommended Range</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>reprice_up_badge_percentage</code></td>
                            <td>How much to increase price when competing with badge sellers</td>
                            <td>0-10% (conservative) or 10-25% (aggressive margin)</td>
                        </tr>
                        <tr>
                            <td><code>reprice_down_badge_percentage</code></td>
                            <td>How much to decrease price when competing with badge sellers</td>
                            <td>1-5% (defensive) or 5-15% (aggressive positioning)</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- UI COMPONENTS -->
            <section id="ui-components">
                <h2>UI Components Guide</h2>

                <h3>DataTable Component</h3>

                <div class="card">
                    <h4><span class="badge badge-ui">Component</span> Advanced Product Data Table</h4>
                    <p><strong>Features:</strong></p>
                    <ul>
                        <li><strong>Sorting</strong> - Multi-column sorting with ascending/descending toggle</li>
                        <li><strong>Filtering</strong> - Global search and column-specific filters</li>
                        <li><strong>Pagination</strong> - Customizable rows per page (10/20/50/100/all)</li>
                        <li><strong>Column Visibility</strong> - Show/hide columns via "View" menu</li>
                        <li><strong>Column Pinning</strong> - Fixed columns (Channel and MP ID) stay visible when scrolling</li>
                        <li><strong>Responsive</strong> - Horizontal scroll on smaller screens with pinned columns</li>
                    </ul>

                    <p><strong>Keyboard Shortcuts:</strong></p>
                    <ul>
                        <li><code>Tab</code> - Navigate between table controls</li>
                        <li><code>Enter</code> - Activate buttons and links</li>
                        <li><code>Arrow Keys</code> - Navigate within dropdowns</li>
                    </ul>
                </div>

                <div class="screenshot-placeholder">
                    [Screenshot: DataTable with column visibility menu open]
                </div>

                <h3>DataTableToolbar</h3>

                <div class="card">
                    <h4><span class="badge badge-ui">Component</span> Table Filter Toolbar</h4>
                    <p><strong>Controls:</strong></p>
                    <ul>
                        <li><strong>Search Input</strong> - Filter by MP ID (exact match) or channel name (partial match)</li>
                        <li><strong>View Button</strong> - Column visibility toggle menu</li>
                        <li><strong>Reset Button</strong> - Clear all filters and sorting (appears when filters active)</li>
                    </ul>

                    <p><strong>Usage Tips:</strong></p>
                    <ul>
                        <li>Search is case-insensitive</li>
                        <li>Multiple filters can be active simultaneously</li>
                        <li>Filtered row count displays next to total count</li>
                    </ul>
                </div>

                <h3>V2AlgoSettingsForm</h3>

                <div class="card">
                    <h4><span class="badge badge-ui">Component</span> Algorithm Configuration Form</h4>
                    <p><strong>Form Structure:</strong></p>
                    <ul>
                        <li><strong>React Hook Form</strong> - Provides validation and error handling</li>
                        <li><strong>Zod Schema</strong> - Type-safe validation with detailed error messages</li>
                        <li><strong>Real-time Validation</strong> - Errors display immediately on field blur</li>
                        <li><strong>Auto-save Prevention</strong> - Submit button disabled until validation passes</li>
                    </ul>

                    <p><strong>Field Types:</strong></p>
                    <ul>
                        <li><strong>Switch/Toggle</strong> - Boolean values (enabled, suppress_price_break, etc.)</li>
                        <li><strong>Select Dropdown</strong> - Enum values (price_strategy, up_down, badge_indicator)</li>
                        <li><strong>Number Input</strong> - Numeric fields with min/max validation</li>
                        <li><strong>Text Input</strong> - Comma-separated lists (sister_vendor_ids, exclude_vendors)</li>
                    </ul>
                </div>

                <div class="screenshot-placeholder">
                    [Screenshot: V2AlgoSettingsForm showing validation errors]
                </div>

                <h3>Action Buttons</h3>

                <div class="card">
                    <h4><span class="badge badge-ui">Component</span> Product Action Buttons</h4>
                    <p>Available in the Actions column of the products table:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Action</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>üëÅÔ∏è Eye</td>
                                <td>View Details</td>
                                <td>Opens product detail page in new tab</td>
                            </tr>
                            <tr>
                                <td>üåê Globe</td>
                                <td>Open Net32</td>
                                <td>Opens Net32 product page in new tab (if URL available)</td>
                            </tr>
                            <tr>
                                <td>üîî Bell</td>
                                <td>Remove 422</td>
                                <td>Removes product from 422 error retry queue</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Toast Notifications</h3>

                <div class="card">
                    <h4><span class="badge badge-ui">Component</span> Feedback System</h4>
                    <p>Toast notifications appear in the bottom-right corner for:</p>
                    <ul>
                        <li><strong>Success</strong> - Green toast with checkmark (settings saved, operations completed)</li>
                        <li><strong>Error</strong> - Red toast with X icon (API failures, validation errors)</li>
                        <li><strong>Info</strong> - Blue toast for informational messages</li>
                    </ul>

                    <p><strong>Duration:</strong> Toasts auto-dismiss after 5 seconds, or can be manually dismissed by clicking the X.</p>
                </div>
            </section>

            <!-- FORM FIELDS -->
            <section id="form-fields">
                <h2>Form Field Reference</h2>

                <p>Complete guide to all 27 V2 Algorithm settings fields available in the V2AlgoSettingsForm:</p>

                <h3>Basic Configuration</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Default/Range</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>enabled</code></td>
                            <td>Boolean</td>
                            <td>Master switch to enable/disable V2 algorithm for this product-vendor</td>
                            <td>true/false</td>
                        </tr>
                        <tr>
                            <td><code>execution_priority</code></td>
                            <td>Number</td>
                            <td>Order of execution when multiple products are processed (lower = earlier)</td>
                            <td>0-1000</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Price Direction & Strategy</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Options</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>up_down</code></td>
                            <td>Enum</td>
                            <td>Allowed price movement direction</td>
                            <td>UP | DOWN | UP/DOWN</td>
                        </tr>
                        <tr>
                            <td><code>price_strategy</code></td>
                            <td>Enum</td>
                            <td>Pricing calculation method</td>
                            <td>UNIT | TOTAL | BUY_BOX</td>
                        </tr>
                    </tbody>
                </table>

                <div class="info-box">
                    <strong>Price Strategy Explained:</strong>
                    <ul>
                        <li><strong>UNIT</strong> - Compete on per-unit price only</li>
                        <li><strong>TOTAL</strong> - Compete on total price including quantity breaks</li>
                        <li><strong>BUY_BOX</strong> - Optimize specifically to win Net32 buy-box position</li>
                    </ul>
                </div>

                <h3>Badge Competition Settings</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Default/Range</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>badge_indicator</code></td>
                            <td>Enum</td>
                            <td>Badge competition strategy</td>
                            <td>ALL | BADGE</td>
                        </tr>
                        <tr>
                            <td><code>reprice_up_badge_percentage</code></td>
                            <td>Number</td>
                            <td>Percentage increase when competing with badge sellers</td>
                            <td>-1 to 100 (-1 = disabled)</td>
                        </tr>
                        <tr>
                            <td><code>reprice_down_badge_percentage</code></td>
                            <td>Number</td>
                            <td>Percentage decrease when competing with badge sellers</td>
                            <td>-1 to 100 (-1 = disabled)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Price Boundaries</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Validation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>floor_price</code></td>
                            <td>Number</td>
                            <td>Absolute minimum price - algorithm will never go below this</td>
                            <td>‚â• 0</td>
                        </tr>
                        <tr>
                            <td><code>max_price</code></td>
                            <td>Number</td>
                            <td>Maximum price cap - algorithm will never exceed this</td>
                            <td>‚â• 0, should be > floor_price</td>
                        </tr>
                        <tr>
                            <td><code>reprice_up_percentage</code></td>
                            <td>Number</td>
                            <td>General percentage for price increases</td>
                            <td>-1 to 100 (-1 = disabled)</td>
                        </tr>
                        <tr>
                            <td><code>reprice_down_percentage</code></td>
                            <td>Number</td>
                            <td>General percentage for price decreases</td>
                            <td>-1 to 100 (-1 = disabled)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Competition Filters</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Format</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>compete_with_all_vendors</code></td>
                            <td>Boolean</td>
                            <td>If true, ignore vendor filters and compete with everyone</td>
                            <td>true/false</td>
                        </tr>
                        <tr>
                            <td><code>sister_vendor_ids</code></td>
                            <td>String</td>
                            <td>Comma-separated vendor IDs to treat as same entity (don't compete)</td>
                            <td>"17357,20722"</td>
                        </tr>
                        <tr>
                            <td><code>exclude_vendors</code></td>
                            <td>String</td>
                            <td>Comma-separated vendor IDs to exclude from competition analysis</td>
                            <td>"20755,5"</td>
                        </tr>
                        <tr>
                            <td><code>inactive_vendor_id</code></td>
                            <td>String</td>
                            <td>Vendor IDs to mark as inactive (not considered in pricing)</td>
                            <td>"20533"</td>
                        </tr>
                        <tr>
                            <td><code>handling_time_group</code></td>
                            <td>Enum</td>
                            <td>Filter competitors by handling time category</td>
                            <td>ALL | FAST_SHIPPING | STOCKED | LONG_HANDLING</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Price Break Configuration</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Default</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>suppress_price_break</code></td>
                            <td>Boolean</td>
                            <td>Always suppress price breaks (disable quantity discounts)</td>
                            <td>false</td>
                        </tr>
                        <tr>
                            <td><code>suppress_price_break_if_Q1_not_updated</code></td>
                            <td>Boolean</td>
                            <td>Suppress price breaks only if Q1 (base quantity) wasn't updated</td>
                            <td>false</td>
                        </tr>
                        <tr>
                            <td><code>compete_on_price_break_only</code></td>
                            <td>Boolean</td>
                            <td>Only compete on price break tiers, ignore base unit price</td>
                            <td>false</td>
                        </tr>
                        <tr>
                            <td><code>compare_q2_with_q1</code></td>
                            <td>Boolean</td>
                            <td>Compare Q2 tier pricing against Q1 tier before applying</td>
                            <td>false</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Advanced Competition Rules</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Default/Range</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>keep_position</code></td>
                            <td>Boolean</td>
                            <td>Maintain current competitive position rather than aggressive repricing</td>
                            <td>false</td>
                        </tr>
                        <tr>
                            <td><code>inventory_competition_threshold</code></td>
                            <td>Number</td>
                            <td>Minimum inventory quantity required for competitor to be considered</td>
                            <td>0-1000</td>
                        </tr>
                        <tr>
                            <td><code>floor_compete_with_next</code></td>
                            <td>Boolean</td>
                            <td>When at floor price, still try to compete with next cheapest seller</td>
                            <td>false</td>
                        </tr>
                        <tr>
                            <td><code>own_vendor_threshold</code></td>
                            <td>Number</td>
                            <td>Price differential threshold for own vendor's other listings</td>
                            <td>0-100</td>
                        </tr>
                    </tbody>
                </table>

                <div class="warning-box">
                    <strong>Field Validation Rules:</strong>
                    <ul>
                        <li>All percentage fields accept -1 to disable that specific rule</li>
                        <li>Floor price must be less than max price</li>
                        <li>Vendor ID lists must be comma-separated numbers with no spaces</li>
                        <li>Execution priority conflicts are allowed but not recommended</li>
                    </ul>
                </div>
            </section>

            <!-- WORKFLOWS -->
            <section id="workflows">
                <h2>Common Workflows</h2>

                <h3>Workflow 1: Setting Up a New Product for V2 Repricing</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Verify Product Exists</strong>
                    <p>Search for the product by MP ID on the Products page. If it doesn't appear, ensure the product has been scraped and added to the database via the repricer app.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Access Product Detail</strong>
                    <p>Click the Eye icon or MP ID to open the product detail page.</p>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Select Vendor Tab</strong>
                    <p>Choose the vendor you want to configure (e.g., TRADENT).</p>
                </div>

                <div class="step">
                    <span class="step-number">4</span>
                    <strong>Configure Essential Settings</strong>
                    <p>At minimum, set these critical fields:</p>
                    <ul>
                        <li><code>enabled</code> = <strong>true</strong></li>
                        <li><code>floor_price</code> = Your minimum acceptable price</li>
                        <li><code>max_price</code> = Your maximum price cap</li>
                        <li><code>price_strategy</code> = Start with <strong>UNIT</strong> for simplicity</li>
                        <li><code>badge_indicator</code> = Choose <strong>ALL</strong> for aggressive competition or <strong>BADGE</strong> for premium positioning</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">5</span>
                    <strong>Configure Advanced Settings</strong>
                    <p>Adjust additional fields based on business requirements:</p>
                    <ul>
                        <li>Set <code>reprice_down_percentage</code> to control how aggressive price decreases can be</li>
                        <li>Configure <code>exclude_vendors</code> if you don't want to compete with specific sellers</li>
                        <li>Set <code>handling_time_group</code> if you only want to compete with similar fulfillment speeds</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">6</span>
                    <strong>Save and Test</strong>
                    <p>Click "Save Settings" then immediately click "Manual Reprice" to test the configuration. Review the execution results table to see the algorithm's decision.</p>
                </div>

                <div class="step">
                    <span class="step-number">7</span>
                    <strong>Set Execution Mode</strong>
                    <p>On the Products page, change the product's <code>algo_execution_mode</code> from V1_ONLY to V2_ONLY (or V2_EXECUTE_V1_DRY for testing).</p>
                </div>

                <h3>Workflow 2: Adjusting Competition Strategy</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Analyze Current Performance</strong>
                    <p>Review the execution history on the product detail page:</p>
                    <ul>
                        <li>Check the "Comment" field to see why prices were set</li>
                        <li>Look at "Triggered By Vendor" to identify which competitors influenced pricing</li>
                        <li>Review suggested prices vs actual prices applied</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Identify Issue</strong>
                    <p>Common issues and their solutions:</p>
                    <ul>
                        <li><strong>Prices too aggressive (too low):</strong> Increase <code>floor_price</code> or reduce <code>reprice_down_percentage</code></li>
                        <li><strong>Not winning buy-box:</strong> Change <code>price_strategy</code> to BUY_BOX</li>
                        <li><strong>Competing with low-quality sellers:</strong> Switch <code>badge_indicator</code> to BADGE</li>
                        <li><strong>Prices not moving:</strong> Check <code>enabled</code> is true and <code>up_down</code> allows desired direction</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Adjust Settings</strong>
                    <p>Modify the relevant fields in the V2AlgoSettingsForm based on your analysis.</p>
                </div>

                <div class="step">
                    <span class="step-number">4</span>
                    <strong>Test Changes</strong>
                    <p>Use "Manual Reprice" to immediately test the new settings. Review the chain-of-thought HTML to understand the algorithm's reasoning.</p>
                </div>

                <div class="step">
                    <span class="step-number">5</span>
                    <strong>Monitor Results</strong>
                    <p>Check the execution history over the next 24-48 hours to ensure the strategy is working as intended.</p>
                </div>

                <h3>Workflow 3: Troubleshooting Failed Repricing</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Check Errors Page</strong>
                    <p>Navigate to <code>/vite/errors</code> and search for your product's MP ID.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Review Error Message</strong>
                    <p>Click "View Error" to see the full error details. Common errors:</p>
                    <ul>
                        <li><strong>"Floor price exceeds max price"</strong> - Fix the price boundaries in settings</li>
                        <li><strong>"No competitors found"</strong> - Check if product is actively listed on Net32</li>
                        <li><strong>"Invalid vendor configuration"</strong> - Verify vendor_id and channel_id are correct</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Check Product Settings</strong>
                    <p>Go to the product detail page and verify:</p>
                    <ul>
                        <li><code>enabled</code> is set to true</li>
                        <li>Floor price < Max price</li>
                        <li>Valid <code>price_strategy</code> is selected</li>
                        <li>No conflicting rules (e.g., up_down=DOWN with reprice_up_percentage set)</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">4</span>
                    <strong>Check Scrape Data Status</strong>
                    <p>On the Products page, verify "Data - Scrape" shows "Yes" for the product. If not, the product might not be actively scraped for competitor data.</p>
                </div>

                <div class="step">
                    <span class="step-number">5</span>
                    <strong>Remove from 422 Queue</strong>
                    <p>If the error was a temporary Net32 API issue, click the Bell icon to remove the product from the 422 retry queue.</p>
                </div>

                <div class="step">
                    <span class="step-number">6</span>
                    <strong>Manual Reprice Test</strong>
                    <p>After fixing the issue, run "Manual Reprice" to confirm it's resolved.</p>
                </div>

                <h3>Workflow 4: Migrating from V1 to V2 Algorithm</h3>

                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Select Test Products</strong>
                    <p>Choose a small subset of products (5-10) with varying price points and competition levels for initial testing.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Configure V2 Settings</strong>
                    <p>For each test product, configure V2 algorithm settings attempting to mirror V1 behavior initially.</p>
                </div>

                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Enable Dry Run Mode</strong>
                    <p>Set <code>algo_execution_mode</code> to <strong>V1_EXECUTE_V2_DRY</strong>. This runs V1 for actual pricing but simulates V2 for comparison.</p>
                </div>

                <div class="step">
                    <span class="step-number">4</span>
                    <strong>Compare Results</strong>
                    <p>Monitor execution history for 3-5 days, comparing V1 actual results with V2 simulated results. Look for:</p>
                    <ul>
                        <li>Similar price suggestions</li>
                        <li>Similar reasoning in comments</li>
                        <li>Any unexpected V2 behaviors</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">5</span>
                    <strong>Adjust V2 Settings</strong>
                    <p>Refine V2 settings to achieve desired behaviors that may improve on V1.</p>
                </div>

                <div class="step">
                    <span class="step-number">6</span>
                    <strong>Switch to V2 Execution</strong>
                    <p>Change <code>algo_execution_mode</code> to <strong>V2_ONLY</strong> for the test products.</p>
                </div>

                <div class="step">
                    <span class="step-number">7</span>
                    <strong>Monitor Closely</strong>
                    <p>Watch test products for 1-2 weeks, checking:</p>
                    <ul>
                        <li>Price movements stay within acceptable ranges</li>
                        <li>No unexpected errors</li>
                        <li>Buy-box win rate and profit margins</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">8</span>
                    <strong>Gradual Rollout</strong>
                    <p>Expand to more products incrementally, monitoring each batch before proceeding.</p>
                </div>
            </section>

            <!-- TROUBLESHOOTING -->
            <section id="troubleshooting">
                <h2>Troubleshooting</h2>

                <h3>Common Issues and Solutions</h3>

                <div class="faq-item">
                    <div class="faq-question">‚ùå UI not loading - blank white screen</div>
                    <div class="faq-answer">
                        <p><strong>Possible Causes:</strong></p>
                        <ul>
                            <li>JavaScript build error</li>
                            <li>Incorrect routing configuration</li>
                            <li>Browser compatibility issue</li>
                        </ul>
                        <p><strong>Solutions:</strong></p>
                        <ol>
                            <li>Hard refresh: Press <code>Ctrl+Shift+R</code> (Windows) or <code>Cmd+Shift+R</code> (Mac)</li>
                            <li>Clear browser cache and cookies for the domain</li>
                            <li>Check browser console for JavaScript errors (F12 ‚Üí Console tab)</li>
                            <li>Ensure you're accessing via <code>/vite/</code> route</li>
                            <li>Try a different modern browser (Chrome, Firefox, Edge)</li>
                        </ol>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">‚ùå Form validation errors won't clear</div>
                    <div class="faq-answer">
                        <p><strong>Cause:</strong> Field value doesn't meet validation requirements.</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Read the red error message below the field carefully</li>
                            <li>Ensure numeric fields contain only numbers (no letters or symbols)</li>
                            <li>Verify percentage fields are between -1 and 100</li>
                            <li>Check that floor_price < max_price</li>
                            <li>Ensure vendor ID lists are comma-separated numbers only</li>
                        </ul>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">‚ùå "Failed to fetch" error when loading data</div>
                    <div class="faq-answer">
                        <p><strong>Causes:</strong></p>
                        <ul>
                            <li>API endpoint not responding</li>
                            <li>Network connectivity issue</li>
                            <li>CORS configuration problem</li>
                        </ul>
                        <p><strong>Solutions:</strong></p>
                        <ol>
                            <li>Check that the repricer app is running (backend service)</li>
                            <li>Verify network connection is stable</li>
                            <li>Check browser console for specific HTTP error codes:
                                <ul>
                                    <li><code>404</code> - API route not found, check URL configuration</li>
                                    <li><code>500</code> - Server error, check backend logs</li>
                                    <li><code>401/403</code> - Authentication issue, log in again</li>
                                </ul>
                            </li>
                            <li>Try clicking "Refresh Data" button</li>
                        </ol>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">‚ùå Settings save but don't take effect</div>
                    <div class="faq-answer">
                        <p><strong>Explanation:</strong> Settings changes only apply on the next cron execution, not immediately.</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Use "Manual Reprice" button to immediately apply new settings</li>
                            <li>Wait for next scheduled cron run (check "Last Run" timestamp)</li>
                            <li>Verify <code>enabled</code> is set to true</li>
                            <li>Ensure product's <code>algo_execution_mode</code> is V2_ONLY or V2_EXECUTE_V1_DRY</li>
                        </ul>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">‚ùå Table shows "Loading..." forever</div>
                    <div class="faq-answer">
                        <p><strong>Causes:</strong></p>
                        <ul>
                            <li>API request hanging</li>
                            <li>Large dataset causing timeout</li>
                            <li>Database query issue</li>
                        </ul>
                        <p><strong>Solutions:</strong></p>
                        <ol>
                            <li>Refresh the page</li>
                            <li>Check browser console for error messages</li>
                            <li>Verify database connections are healthy (check backend logs)</li>
                            <li>If problem persists, check if there's a database query performance issue</li>
                        </ol>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">‚ùå "Remove from 422" button does nothing</div>
                    <div class="faq-answer">
                        <p><strong>Causes:</strong></p>
                        <ul>
                            <li>Product doesn't have a Net32 URL</li>
                            <li>API endpoint error</li>
                            <li>Product not actually in 422 cache</li>
                        </ul>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Check if the product has a valid <code>net32_url</code> (Globe icon should be visible)</li>
                            <li>Look for error toast notification</li>
                            <li>Verify the product actually has 422 errors on the Errors page</li>
                            <li>Try "Remove All From 422" bulk operation instead</li>
                        </ul>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">‚ùå Execution mode dropdown is disabled/grayed out</div>
                    <div class="faq-answer">
                        <p><strong>Cause:</strong> Update is in progress.</p>
                        <p><strong>Solution:</strong> Wait a moment for the API request to complete. If it stays disabled for more than 10 seconds, refresh the page.</p>
                    </div>
                </div>

                <h3>Browser Compatibility</h3>

                <div class="card">
                    <h4>Supported Browsers</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Browser</th>
                                <th>Minimum Version</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Chrome</td>
                                <td>90+</td>
                                <td>‚úÖ Fully Supported</td>
                            </tr>
                            <tr>
                                <td>Firefox</td>
                                <td>88+</td>
                                <td>‚úÖ Fully Supported</td>
                            </tr>
                            <tr>
                                <td>Edge</td>
                                <td>90+</td>
                                <td>‚úÖ Fully Supported</td>
                            </tr>
                            <tr>
                                <td>Safari</td>
                                <td>14+</td>
                                <td>‚úÖ Fully Supported</td>
                            </tr>
                            <tr>
                                <td>Internet Explorer</td>
                                <td>Any</td>
                                <td>‚ùå Not Supported</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Performance Issues</h3>

                <div class="card">
                    <h4>Slow Table Loading</h4>
                    <p><strong>Solutions:</strong></p>
                    <ul>
                        <li>Use column visibility to hide unused columns</li>
                        <li>Reduce rows per page to 10 or 20</li>
                        <li>Apply filters to narrow down dataset</li>
                        <li>Clear browser cache if data seems stale</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>Slow Form Saving</h4>
                    <p><strong>Solutions:</strong></p>
                    <ul>
                        <li>Check network speed - API calls may be slow</li>
                        <li>Verify database write performance on backend</li>
                        <li>Avoid rapid successive saves (wait for confirmation toast)</li>
                    </ul>
                </div>
            </section>

            <!-- BEST PRACTICES -->
            <section id="best-practices">
                <h2>Best Practices</h2>

                <h3>Data Entry Best Practices</h3>

                <div class="card">
                    <h4>1. Always Set Realistic Price Boundaries</h4>
                    <ul>
                        <li>Calculate floor price based on: <code>Cost + Min Acceptable Margin</code></li>
                        <li>Set max price based on: <code>Market Value + Brand Premium (if applicable)</code></li>
                        <li>Ensure floor < max with reasonable buffer (at least $5-10 difference)</li>
                        <li>Review boundaries monthly as costs change</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>2. Start Conservative with New Products</h4>
                    <ul>
                        <li>Use V1_EXECUTE_V2_DRY mode first to test without risk</li>
                        <li>Set <code>reprice_down_percentage</code> to 1-2% initially</li>
                        <li>Enable <code>keep_position</code> to prevent aggressive moves</li>
                        <li>Monitor closely for first week before expanding scope</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>3. Use Appropriate Badge Strategies</h4>
                    <ul>
                        <li>High-margin products: Use BADGE strategy to protect margins</li>
                        <li>Commoditized products: Use ALL strategy for market share</li>
                        <li>Premium brands: Use BADGE with higher reprice_up_badge_percentage</li>
                        <li>Volume products: Use ALL with competitive reprice_down_percentage</li>
                    </ul>
                </div>

                <h3>Monitoring Best Practices</h3>

                <div class="card">
                    <h4>1. Daily Checks</h4>
                    <ul>
                        <li>Review Errors page for new algorithm failures</li>
                        <li>Spot-check 5-10 random products' execution history</li>
                        <li>Verify no products have prices at floor or max (indicates boundary issues)</li>
                        <li>Check that crons are running (Last Run timestamps are recent)</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>2. Weekly Reviews</h4>
                    <ul>
                        <li>Analyze products with frequent errors</li>
                        <li>Review products with unchanged prices for 7+ days</li>
                        <li>Check buy-box win rates for top revenue products</li>
                        <li>Identify opportunities to refine badge strategies</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>3. Monthly Optimization</h4>
                    <ul>
                        <li>Review and adjust floor/max prices based on cost changes</li>
                        <li>Analyze margin performance by badge strategy</li>
                        <li>Test new strategies on low-risk products</li>
                        <li>Document successful configuration patterns for reuse</li>
                    </ul>
                </div>

                <h3>Bulk Operation Best Practices</h3>

                <div class="card">
                    <h4>1. Sync All Settings Carefully</h4>
                    <ul>
                        <li>Only use "Sync All Settings" when you've made systematic changes</li>
                        <li>Avoid during peak hours when crons are running</li>
                        <li>Monitor for 15-30 minutes after sync to catch any issues</li>
                        <li>Be aware this is a heavy database operation</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>2. Remove All From 422 Strategically</h4>
                    <ul>
                        <li>Use only after fixing root cause of 422 errors</li>
                        <li>Monitor error rates after clearing to verify fix worked</li>
                        <li>Consider individual removal first for small sets of products</li>
                    </ul>
                </div>

                <h3>Security Best Practices</h3>

                <div class="card">
                    <h4>1. Access Control</h4>
                    <ul>
                        <li>Only grant access to users who need to modify algorithm settings</li>
                        <li>Use view-only access for monitoring personnel</li>
                        <li>Log out when leaving workstation unattended</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>2. Change Management</h4>
                    <ul>
                        <li>Document major configuration changes</li>
                        <li>Test changes on low-risk products first</li>
                        <li>Have a rollback plan before making bulk changes</li>
                        <li>Coordinate with team before large-scale strategy shifts</li>
                    </ul>
                </div>

                <h3>Performance Optimization</h3>

                <div class="card">
                    <h4>1. Table Performance</h4>
                    <ul>
                        <li>Hide unused columns to reduce rendering overhead</li>
                        <li>Use pagination instead of "Show all" for large datasets</li>
                        <li>Apply filters to narrow scope before sorting</li>
                        <li>Close unused browser tabs to free memory</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>2. API Usage</h4>
                    <ul>
                        <li>Allow cached data to serve when freshness isn't critical</li>
                        <li>Use "Refresh Data (Ignore Cache)" only when needed</li>
                        <li>Avoid rapid successive API calls (save/manual reprice/save)</li>
                        <li>Be patient with bulk operations - don't refresh repeatedly</li>
                    </ul>
                </div>
            </section>

            <!-- FAQ -->
            <section id="faq">
                <h2>Frequently Asked Questions</h2>

                <div class="faq-item">
                    <div class="faq-question">Q: What's the difference between the front-end app and the repricer app?</div>
                    <div class="faq-answer">
                        <p><strong>Front-End App</strong> is a modern React UI specifically for V2 algorithm configuration and monitoring. It's embedded at <code>/vite</code> route.</p>
                        <p><strong>Repricer App</strong> is the main Express application containing business logic, cron management, and the legacy EJS-based UI.</p>
                        <p>The front-end communicates with the repricer backend via API calls.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: Can I use the UI on mobile devices?</div>
                    <div class="faq-answer">
                        <p>Yes, the UI is responsive and works on tablets and phones. However, the data table's horizontal scrolling can be cumbersome on small screens. For best experience, use a desktop or tablet in landscape mode.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: How often is the product data refreshed?</div>
                    <div class="faq-answer">
                        <p>By default, the UI displays cached data that refreshes every 2 hours. You can force a refresh by clicking "Refresh Data (Ignore Cache)" button. The cache timestamp is displayed in the top-right corner of the Products page.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: What happens if I set floor_price higher than max_price?</div>
                    <div class="faq-answer">
                        <p>The form validation will prevent you from saving. You'll see a red error message indicating the constraint violation. Always ensure floor_price < max_price.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: Can I bulk edit multiple products at once?</div>
                    <div class="faq-answer">
                        <p>Currently, the UI doesn't support bulk editing of algorithm settings. You must configure each product-vendor combination individually. However, "Sync All Settings" can propagate vendor-level defaults.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: What's the "chain of thought HTML" and why would I view it?</div>
                    <div class="faq-answer">
                        <p>The chain-of-thought HTML is a detailed step-by-step explanation of the algorithm's decision-making process for a specific repricing execution. It's useful for:</p>
                        <ul>
                            <li>Understanding why a particular price was suggested</li>
                            <li>Debugging unexpected behavior</li>
                            <li>Learning how different settings affect outcomes</li>
                            <li>Training new team members on algorithm logic</li>
                        </ul>
                        <p>Click "View COT" in the execution history table to open it in a new tab.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: How do I know which badge strategy to use?</div>
                    <div class="faq-answer">
                        <p>Follow this decision framework:</p>
                        <ul>
                            <li><strong>Use ALL if:</strong> You want maximum competitiveness, commoditized product, volume over margin</li>
                            <li><strong>Use BADGE if:</strong> Premium product, high margins important, your vendor has badges</li>
                        </ul>
                        <p>Test both strategies for a week and compare margin vs volume outcomes.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: What does "-1" mean in percentage fields?</div>
                    <div class="faq-answer">
                        <p>A value of -1 disables that specific percentage-based rule. For example:</p>
                        <ul>
                            <li><code>reprice_up_percentage = -1</code> means no percentage-based price increases</li>
                            <li><code>reprice_down_badge_percentage = -1</code> means no badge-specific decrease percentages</li>
                        </ul>
                        <p>This allows fine-grained control over which rules apply.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: Can I export the products table data?</div>
                    <div class="faq-answer">
                        <p>The UI doesn't currently have a built-in export feature. For exporting data, use the excel-export app which provides 63-column vendor reports. Access this through the main repricer application.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: What's the difference between UNIT, TOTAL, and BUY_BOX price strategies?</div>
                    <div class="faq-answer">
                        <table>
                            <thead>
                                <tr>
                                    <th>Strategy</th>
                                    <th>Focus</th>
                                    <th>Best For</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>UNIT</strong></td>
                                    <td>Per-unit price only</td>
                                    <td>Single-unit purchases, simple pricing</td>
                                </tr>
                                <tr>
                                    <td><strong>TOTAL</strong></td>
                                    <td>Total price including quantity breaks</td>
                                    <td>Bulk purchases, quantity discount optimization</td>
                                </tr>
                                <tr>
                                    <td><strong>BUY_BOX</strong></td>
                                    <td>Winning featured seller position</td>
                                    <td>High-volume products where buy-box drives sales</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: Why do some products show "N/A" for execution data?</div>
                    <div class="faq-answer">
                        <p>Possible reasons:</p>
                        <ul>
                            <li>Product hasn't been repriced yet (no execution history)</li>
                            <li>Product is new and hasn't been picked up by a cron</li>
                            <li>Product's <code>enabled</code> is false</li>
                            <li>Product's execution mode is V1_ONLY (not using V2 algorithm)</li>
                        </ul>
                        <p>Use "Manual Reprice" to generate initial execution data.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Q: How do I report a bug or request a feature?</div>
                    <div class="faq-answer">
                        <p>Contact the development team with:</p>
                        <ul>
                            <li>Detailed description of the issue or feature request</li>
                            <li>Steps to reproduce (for bugs)</li>
                            <li>Screenshots if applicable</li>
                            <li>Browser and version information</li>
                            <li>Product MP ID if relevant</li>
                        </ul>
                        <p>Check the browser console (F12) for error messages to include in your report.</p>
                    </div>
                </div>
            </section>
        </div>

        <footer>
            <p><strong>Front-End User Guide</strong> | Version 1.0.0 | Last Updated: 2025-11-18</p>
            <p>V2 Algorithm React UI - Part of the Dental Supply Repricer Monorepo System</p>
            <p>Built with React 19.1, TanStack Router, Radix UI, and Tailwind CSS</p>
        </footer>
    </div>
</body>
</html>
